<!DOCTYPE html>
<html lang="zh">
<head>
    {include file="public/base" title="$title" keywords="$keywords" description="$description" /}
    <style>

        .main {
            margin: 0 5%;
        }

        pre {
            overflow-y: auto;
            overflow-x: hidden;
        }

        pre code {
            border-radius: 3px;
            white-space: pre;
            padding: 14px !important;
            line-height: 20px;
        }

        /*code ol {
            margin: 0;
        }

        code ol li {
            padding-left: 8px;
        }*/

        pre {
            position: relative
        }

        pre:hover .hljs-button {
            display: block
        }

        blockquote {
            margin: 14px 0;
            padding: 14px;
            font-size: 14px;
            border-left: 5px solid #4CAF50;
            background-color: #F6F6F6;
            color: #999;
        }

        blockquote p {
            line-height: 1.6;
            word-wrap: break-word;
            margin: 0;
        }

        h1 {
            margin: 15px 0;
        }

        .article-content {
            width: 60%;
            display: inline-block;
            padding: 16px 24px;
        }

        .hljs-button {
            display: none;
            position: absolute;
            right: 4px;
            top: 4px;
            font-size: 12px;
            color: white;
            padding: 2px 8px;
            margin: 2px;
            cursor: pointer;
        }

        .article-tag {
            margin-left: 5px;
            margin-right: 5px;
        }

        .side-bar {
            display: inline-block;
            padding: 16px 24px;
            vertical-align: top;
        }

        .side-bar h3 {
            font-size: 14px;
            font-weight: bold;
            margin:  0;
        }

        .side-bar h3::before {
            display: inline-block;
            margin-right: 8px;
            content: '';
            width: 4px;
            height: 22px;
            vertical-align: -6px;
            background-color: #4CAF50;
        }

        .side-bar ul, .side-bar li {
            list-style: none;
            margin: 0;
            padding: 0;
        }

        .side-bar li {
            margin-top: 8px;
        }

        .side-bar li a {
            display: block;
            color: #333333;
            text-decoration: none;
            line-height: 22px;
            max-height: 44px;
            overflow: hidden;
            word-wrap: break-word;
        }

        .side-bar li span {
            font-size: 12px;
            color: #8a8a8a;
        }

    </style>
</head>
<body>
{include file="public/header" /}
<div class="main">
    <div class="shadow article-content">
        <h1 class="article-title">{$title}</h1>
        <p>
            <span style="color: #8a8a8a">posted @ {:timeFormat($postTime)} · 阅读（{$pv}）· 评论（{$commentCount}）· 点赞（{$likeCount}）</span>
        </p>
        <hr>
        <div style="margin-top: 15px">{$content}</div>
    </div>
    <div class="shadow side-bar">
        <h3>阅读排行榜</h3>
        <ul>
            {foreach $pvRank as $pvPost}
            <li>
            <a href="/p/{$pvPost[0]}.html">{$pvPost[1]}</a>
            <span>阅读数：{$pvPost[2]}</span>
            </li>
            {/foreach}
        </ul>

    </div>
</div>
{include file="public/footer" /}
{include file="public/base_js" /}
<script>
    hljs.initHighlightingOnLoad();

    $("pre").each(function (index, element) {
        let preTag = $(this);
        preTag.append("<div class='hljs-button' title='Copy to Clipboard'>Copy</div>");
        let id = "code" + index;
        preTag.children("code").attr("id", id);
        preTag.children(".hljs-button").attr("data-clipboard-target", "#" + id);
    });
    let clipboard = new ClipboardJS('.hljs-button');
    clipboard.on('success', function (e) {
        e.clearSelection();
        let copyBtn = $(e.trigger);
        copyBtn.html("Copy Success");
        setTimeout(function () {
            copyBtn.html("Copy");
        }, 1000);

    });
    clipboard.on('error', function (e) {
        let copyBtn = $(e.trigger);
        copyBtn.html("Copy Fail");
        setTimeout(function () {
            copyBtn.html("Copy");
        }, 1000);
    });
</script>
</body>
</html>